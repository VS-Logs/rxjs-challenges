import{n as l,S as I,f,g as h,q as S,O as b,j as v,h as u,m as p,s as x,t as _}from"./tap.3b5cc1bd.js";import{i as a,f as y}from"./header.042d82ff.js";import{i as k}from"./isScheduler.b11c038e.js";var m={now:function(){return(m.delegate||Date).now()},delegate:void 0},q=function(i){l(r,i);function r(t,n){return i.call(this)||this}return r.prototype.schedule=function(t,n){return this},r}(I),c={setInterval:function(i,r){for(var t=[],n=2;n<arguments.length;n++)t[n-2]=arguments[n];var e=c.delegate;return e!=null&&e.setInterval?e.setInterval.apply(e,f([i,r],h(t))):setInterval.apply(void 0,f([i,r],h(t)))},clearInterval:function(i){var r=c.delegate;return((r==null?void 0:r.clearInterval)||clearInterval)(i)},delegate:void 0},C=function(i){l(r,i);function r(t,n){var e=i.call(this,t,n)||this;return e.scheduler=t,e.work=n,e.pending=!1,e}return r.prototype.schedule=function(t,n){if(n===void 0&&(n=0),this.closed)return this;this.state=t;var e=this.id,s=this.scheduler;return e!=null&&(this.id=this.recycleAsyncId(s,e,n)),this.pending=!0,this.delay=n,this.id=this.id||this.requestAsyncId(s,this.id,n),this},r.prototype.requestAsyncId=function(t,n,e){return e===void 0&&(e=0),c.setInterval(t.flush.bind(t,this),e)},r.prototype.recycleAsyncId=function(t,n,e){if(e===void 0&&(e=0),e!=null&&this.delay===e&&this.pending===!1)return n;c.clearInterval(n)},r.prototype.execute=function(t,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var e=this._execute(t,n);if(e)return e;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},r.prototype._execute=function(t,n){var e=!1,s;try{this.work(t)}catch(o){e=!0,s=o||new Error("Scheduled action threw falsy error")}if(e)return this.unsubscribe(),s},r.prototype.unsubscribe=function(){if(!this.closed){var t=this,n=t.id,e=t.scheduler,s=e.actions;this.work=this.state=this.scheduler=null,this.pending=!1,S(s,this),n!=null&&(this.id=this.recycleAsyncId(e,n,null)),this.delay=null,i.prototype.unsubscribe.call(this)}},r}(q),d=function(){function i(r,t){t===void 0&&(t=i.now),this.schedulerActionCtor=r,this.now=t}return i.prototype.schedule=function(r,t,n){return t===void 0&&(t=0),new this.schedulerActionCtor(this,r).schedule(n,t)},i.now=m.now,i}(),D=function(i){l(r,i);function r(t,n){n===void 0&&(n=d.now);var e=i.call(this,t,n)||this;return e.actions=[],e._active=!1,e._scheduled=void 0,e}return r.prototype.flush=function(t){var n=this.actions;if(this._active){n.push(t);return}var e;this._active=!0;do if(e=t.execute(t.state,t.delay))break;while(t=n.shift());if(this._active=!1,e){for(;t=n.shift();)t.unsubscribe();throw e}},r}(d),g=new D(C),$=g;function E(i){return i instanceof Date&&!isNaN(i)}function N(i,r,t){i===void 0&&(i=0),t===void 0&&(t=$);var n=-1;return r!=null&&(k(r)?t=r:n=r),new b(function(e){var s=E(i)?+i-t.now():i;s<0&&(s=0);var o=0;return t.schedule(function(){e.closed||(e.next(o++),0<=n?this.schedule(void 0,n):e.complete())},s)})}function P(i,r){return i===void 0&&(i=0),r===void 0&&(r=g),i<0&&(i=0),N(i,i,r)}function A(i,r){return r?function(t){return t.pipe(A(function(n,e){return a(i(n,e)).pipe(p(function(s,o){return r(n,s,e,o)}))}))}:v(function(t,n){var e=0,s=null,o=!1;t.subscribe(u(n,function(w){s||(s=u(n,void 0,function(){s=null,o&&n.complete()}),a(i(w,e++)).subscribe(s))},function(){o=!0,!s&&n.complete()}))})}function V(i){return v(function(r,t){a(i).subscribe(u(t,function(){return t.complete()},x)),!t.closed&&r.subscribe(t)})}const F=document.querySelector("#timer"),M=document.querySelector("#start"),R=document.querySelector("#stop"),U=y(M,"click"),j=y(R,"click");let z=P(100).pipe(V(j));U.pipe(A(()=>z),p(i=>i/10),_(i=>{F.textContent=i+"s"})).subscribe();
